<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<meta name="google-site-verification" content="CjkdY6BqKWAVmQ78_iSq6J7ZZ9AoL7-CjFVBYGg9FU4" />
<link rel="shortcut icon" href="/custom/favicon.ico" type="image/ico" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" />
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/custom/js/sorttable.js"></script>
<script type="text/javascript" src="/custom/libraries/jquery.min.js"></script>                         
<script type="text/javascript" src="/custom/js/seesaw.js"></script> 
<script type="text/javascript" src="/custom/js/rosversion.js"></script> 
<!--script type="text/javascript" src="/custom/libraries/RGraph.common.core.js" ></script Used for metrics only, should be conditional, not at the top-->
<!--script type="text/javascript" src="/custom/libraries/RGraph.bar.js" ></script same as above -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17821189-2']);
  _gaq.push(['_setDomainName', 'wiki.ros.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>pcl/Tutorials - ROS Wiki</title>
<script type="text/javascript" src="/moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/moin_static197/rostheme/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/moin_static197/rostheme/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/moin_static197/rostheme/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/msie.css">
<![endif]-->




<link rel="canonical" href="http://wiki.ros.org/pcl/Tutorials" />

<link rel="Start" href="/Documentation">
<link rel="Alternate" title="Wiki Markup" href="/pcl/Tutorials?action=raw">
<link rel="Alternate" media="print" title="Print View" href="/pcl/Tutorials?action=print">
<link rel="Up" href="/pcl">
<link rel="Appendix" title="laser-robot-radu.jpg" href="/pcl/Tutorials?action=AttachFile&amp;do=view&amp;target=laser-robot-radu.jpg">
<link rel="Search" href="/FindPage">
<link rel="Index" href="/TitleIndex">
<link rel="Glossary" href="/WordIndex">
<link rel="Help" href="/HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-5950817-2");
pageTracker._trackPageview();
} catch(err) {}</script>

<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
if(f) f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
if(e) {
  searchChange(e);
  searchBlur(e);
}

function handleSubmit() {
  var f = document.getElementById('searchform');
  var t = document.getElementById('searchinput');
  var r = document.getElementById('real_searchinput');
  
  //alert("handleSubmit "+ t.value);
  if(t.value.match(/review/)) {
    r.value = t.value;
  } else {
    //r.value = t.value + " -PackageReviewCategory -StackReviewCategory -M3Review -DocReview -ApiReview -HelpOn -BadContent -LocalSpellingWords";
    r.value = t.value + " -PackageReviewCategory -StackReviewCategory -DocReview -ApiReview";
  }
  //return validate(f);
}
//-->
</script>

<div id="dpage">
  <div id="dpage-inner">
    <div id="header"><div id="topnav">

<!-- Alert box -->
<!-- To enable the alert box uncomment the block below. Change the alert_box_name to a new name. Then update the content below the button. -->
<!-- Disabling alert box
    <div class="alert alert-info alert-dismissable" style="text-align: center;">
<script>
jQuery(function( $ ){
    alert_box_name = 'roswiki_roscon2016_early_registration_last_day'
    state = localStorage.getItem(alert_box_name);
    if (!state) {
      localStorage.setItem(alert_box_name, 'open');
    }
    state = localStorage.getItem(alert_box_name);
    if (state == 'closed') {
        $( '#topnav .alert' ).hide();
    }
    $( '.close' ).click(function () {
	console.log('in .close.click');
        localStorage.setItem(alert_box_name, 'closed');
        $( '#topnav .alert' ).hide();
  });
});
</script>
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      Early registration for <a href="http://roscon.ros.org/2016">ROSCon 2016</a> ends today, August 26th! <br><a href="https://events.osrfoundation.org/roscon-2016-registration/">Register now</a> to get the early registration discount. And <a href="http://conradhotels.hilton.com/en/ch/groups/personalized/S/SELCICI-GROSA-20161003/index.jhtml?WT.mc_id=POG">book you discounted hotel rooms</a> at our <a href="http://roscon.ros.org/2016/#location">discounted rates</a>.
    </div>
 End disabling alert box -->
<!-- End Alert box -->

      <table id="topnav-table">
        <tr>
          <td width="300" valign="top"><a href="/"><img border="0" src="/custom/images/ros_org.png" alt="ros.org" width="238" height="51"/></a></td>
          <td valign="middle">
            <a href="http://www.ros.org/about-ros">About</a>
            |
            <a href="/Support">Support</a>
            |
            <a href="http://status.ros.org/">Status</a>
            |
            <a href="http://answers.ros.org/">answers.ros.org</a>

<!--<a href="http://roscon.ros.org/2016/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/roscon_wiki_header.jpg" width="133" height="65" alt="ROSCon 2016" /></a>
-->

<!-- <a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/ros_kong_2014_badge.png" width="133" height="38" alt="roskong" /></a>
-->
<!--a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://imgur.com/eMzUJVe.png" width="133" height="38" alt="roskong" /></a-->
          </td>

          <td valign="middle" align="right">

<script language="Javascript">

function Searchy(theButton){

theForm = theButton.form;
newID = theForm.input.value;
theForm.q.value = newID;
theForm.input.value=theForm.input.value

}
</script>


<form action="http://www.ros.org/search/index.html" id="cse">
  <div>
    <label>Search:</label>
    <input type="hidden" name="cx" value="018259903093183594226:txvzw9fat6w" />
    <input type="hidden" name="cof" value="FORID:11;NB:1" />
    <input type="hidden" name="filter" value="0" />
    <input type="hidden" name="num" value="10" />

    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="input" id="input" autocomplete="on" style="width: 35%"/>
    <input type="hidden" name="q" value="" />
    <input type="submit" name="sa" value="Submit" onClick="Searchy(this)"/>

  </div>
</form>

         </td>
      </tr>
      <tr>
        <td colspan="3" height="53" width="1024"><nobr><img src="/custom/images/menu_left.png" width="17" height="53" alt=""/><a href="/"><img
        border="0" src="/custom/images/menu_documentation.png" width="237" height="53" alt="Documentation" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="http://www.ros.org/browse/"><img border="0"
        src="/custom/images/menu_browse_software.png" width="268" height="53" alt="Browse Software" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="http://www.ros.org/news"><img border="0"
        src="/custom/images/menu_news.png" width="84" height="53" alt="News" /></a><img
        src="/custom/images/menu_spacer.png" width="69" height="53" /><a href="/ROS/Installation"><img border="0"
        src="/custom/images/menu_download.png" width="151" height="53" alt="Download" /></a><img
        src="/custom/images/menu_right.png" width="60" height="53" /></nobr></td>

      </tr>
    </table> <!-- topnav-table -->

    </div> <!-- /#topav -->
  </div> <!-- /#header -->


<div id="header2">

<ul id="pagelocation">
<li><a href="/pcl">pcl</a></li><li><a class="backlink" href="/action/fullsearch/pcl/Tutorials?action=fullsearch&amp;context=180&amp;value=linkto%3A%22pcl%2FTutorials%22" rel="nofollow" title="Click to do a full-text search for this title">Tutorials</a></li>
</ul>

<div id="locationline">
</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="/Distributions">Distributions</a></li><li class="wikilink"><a href="/ROS/Installation">ROS/Installation</a></li><li class="wikilink"><a href="/ROS/Tutorials">ROS/Tutorials</a></li><li class="wikilink"><a href="/RecentChanges">RecentChanges</a></li><li class="current"><a href="/pcl/Tutorials">pcl/Tutorials</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/action/info/pcl/Tutorials?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/action/AttachFile/pcl/Tutorials?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/pcl/Tutorials">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="show" disabled class="disabled">Delete Cache</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="CreatePdfDocument">CreatePdfDocument</option>
<option value="Load">Load</option>
<option value="RawFile">RawFile</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="/action/login/pcl/Tutorials?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line862">A comprehensive list of PCL tutorials can be found on PCL's <a class="http" href="http://pointclouds.org/documentation/tutorials/">external website</a>.  Here are a few of the tutorials that you might want to check out: <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><ul><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/reading_pcd.php">Reading point cloud data from PCD files</a> <span class="anchor" id="line-4"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/voxel_grid.php#voxelgrid">Downsampling a PointCloud using a VoxelGrid filter</a> <span class="anchor" id="line-5"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/planar_segmentation.php">Planar model segmentation</a> <span class="anchor" id="line-6"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/octree_change.php">Spatial change detection on unorganized point cloud data</a> <span class="anchor" id="line-7"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/resampling.php">Smoothing and normal estimation based on polynomial reconstruction</a> <span class="anchor" id="line-8"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/greedy_projection.php">Fast triangulation of unordered point clouds</a> <span class="anchor" id="line-9"></span></li><li><p class="line891"><a class="http" href="http://pointclouds.org/documentation/tutorials/template_alignment.php">Aligning object templates to a point cloud</a> <span class="anchor" id="line-10"></span></li><li><p class="line891"><a class="https" href="https://github.com/pagakarthik/perception_pcl/tree/hydro-devel/pcl_ros_hydro">Comprehensive list of tutorials for using pcl v1.7.2 library alongside ROS hydro (branch to the hydro_devel) check pcl documentation for explanation</a> <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></li></ul><p class="line867"><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><div class="red solid"><span class="anchor" id="line-1-1"></span><p class="line862">More information about PCL integration in ROS (e.g. point cloud data types, publishing/subscribing) can be found in the <a href="/pcl/Overview">ROS/PCL overview</a>. </div><span class="anchor" id="line-15"></span><p class="line862">The following tutorial describes how to use any of the existing tutorials on <a class="http" href="http://pointclouds.org">http://pointclouds.org</a> in a ROS ecosystem using nodes or nodelets. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line867"><span id="rosversion_selector" class="btn-group">
<button id="electric" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'electric'], hide:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte', 'groovy', 'hydro', 'indigo', 'jade', 'kinetic'], target_ros_distro:'electric'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> electric </button>
<button id="fuerte" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'fuerte'], hide:['fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'electric', 'groovy', 'hydro', 'indigo', 'jade', 'kinetic'], target_ros_distro:'fuerte'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> fuerte </button>
<button id="groovy" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'groovy'], hide:['groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'electric', 'fuerte', 'hydro', 'indigo', 'jade', 'kinetic'], target_ros_distro:'groovy'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> groovy </button>
<button id="hydro" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'hydro'], hide:['hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'electric', 'fuerte', 'groovy', 'indigo', 'jade', 'kinetic'], target_ros_distro:'hydro'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> hydro </button>
<button id="indigo" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'indigo'], hide:['indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'electric', 'fuerte', 'groovy', 'hydro', 'jade', 'kinetic'], target_ros_distro:'indigo'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> indigo </button>
<button id="jade" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'jade_and_older', 'kinetic_and_older', 'jade'], hide:['jade_and_newer', 'kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'electric', 'fuerte', 'groovy', 'hydro', 'indigo', 'kinetic'], target_ros_distro:'jade'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('kinetic').style.background='#e6e6e6';document.getElementById('kinetic').style.color='#3e4f6e';return false"> jade </button>
<button id="kinetic" class="btn btn-default" onClick="Version({show:['electric_and_newer', 'fuerte_and_newer', 'groovy_and_newer', 'hydro_and_newer', 'indigo_and_newer', 'jade_and_newer', 'kinetic_and_newer', 'kinetic_and_older', 'kinetic'], hide:['kinetic_and_newer', 'electric_and_older', 'fuerte_and_older', 'groovy_and_older', 'hydro_and_older', 'indigo_and_older', 'jade_and_older', 'kinetic_and_older', 'electric', 'fuerte', 'groovy', 'hydro', 'indigo', 'jade'], target_ros_distro:'kinetic'});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('electric').style.background='#e6e6e6';document.getElementById('electric').style.color='#3e4f6e';document.getElementById('fuerte').style.background='#e6e6e6';document.getElementById('fuerte').style.color='#3e4f6e';document.getElementById('groovy').style.background='#e6e6e6';document.getElementById('groovy').style.color='#3e4f6e';document.getElementById('hydro').style.background='#e6e6e6';document.getElementById('hydro').style.color='#3e4f6e';document.getElementById('indigo').style.background='#e6e6e6';document.getElementById('indigo').style.color='#3e4f6e';document.getElementById('jade').style.background='#e6e6e6';document.getElementById('jade').style.color='#3e4f6e';return false"> kinetic </button>
</span> <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line867"><script type="text/javascript">
<!--
// @@ Buildsystem macro
function Buildsystem(sections) {
    var dotversion = ".buildsystem."

    // Tag shows unless already tagged
    $.each(sections.show,
        function() {
            $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionshow")
        }
    )

    // Tag hides unless already tagged
    $.each(sections.hide,
        function() {
            $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionhide")
        }
    )

      // Show or hide according to tag
      $(".versionshow").removeClass("versionshow").filter("div").show()
      $(".versionhide").removeClass("versionhide").filter("div").hide()
}

function getURLParameter(name) {
    return decodeURIComponent(
        (
            new RegExp(
                '[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)'
            ).exec(location.search) || [,""]
        )[1].replace(/\+/g, '%20')
    ) || null;
}

$(document).ready(function() {
    var activesystem = "catkin";
    var url_distro = getURLParameter('buildsystem');
    if (url_distro)
    {
        activesystem = url_distro;
    }
    $("div.buildsystem").not("."+activesystem).hide();
    $("#"+activesystem).click();
    $("input.version:hidden").each(function() {
        var bg = $(this).attr("value").split(":");
        $("div.version." + bg[0]).css("background-color", bg[1]).removeClass(bg[0])
    });
})
 // -->
</script>
<span class="btn-group">
<button id="catkin" class="btn btn-default" onClick="Buildsystem({show:['catkin'], hide:['rosbuild']});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('rosbuild').style.background='#e6e6e6';document.getElementById('rosbuild').style.color='#3e4f6e';return false"> catkin </button>
<button id="rosbuild" class="btn btn-default" onClick="Buildsystem({show:['rosbuild'], hide:['catkin']});this.style.color='#e6e6e6';this.style.background='#3e4f6e';document.getElementById('catkin').style.background='#e6e6e6';document.getElementById('catkin').style.color='#3e4f6e';return false"> rosbuild </button>
</span> <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line867"><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><div class="version groovy"><span class="anchor" id="line-1-2"></span><p class="line867"><div dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.content" lang="en"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.top"></span>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1"></span><p class="line867">
<h1 id="pcl.2BAC8-Tutorials.2BAC8-groovy.How_to_use_a_PCL_tutorial_in_ROS">How to use a PCL tutorial in ROS</h1>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.How_to_use_a_PCL_tutorial_in_ROS">How to use a PCL tutorial in ROS</a><ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.Create_a_ROS_package">Create a ROS package</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.Create_the_code_skeleton">Create the code skeleton</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.Add_the_source_file_to_CMakeLists.txt">Add the source file to CMakeLists.txt</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.Download_the_source_code_from_the_PCL_tutorial">Download the source code from the PCL tutorial</a><ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.sensor_msgs.2BAC8-PointCloud2">sensor_msgs/PointCloud2</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.pcl.2BAC8-PointCloud.3CT.3E">pcl/PointCloud&lt;T&gt;</a></li></ol></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-groovy.Create_a_ROS_package">Create a ROS package</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-7"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-11"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-1"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-1"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-2"></span>$ roscreate-pkg my_pcl_tutorial pcl pcl_ros roscpp sensor_msgs</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-13"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-17"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-3"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-2"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-4"></span>$ catkin_create_pkg my_pcl_tutorial pcl pcl_ros roscpp sensor_msgs</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-19"></span><p class="line874">This will create a new ROS package with the necessary dependencies. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-21"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-groovy.Create_the_code_skeleton">Create the code skeleton</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-23"></span><p class="line862">Create an empty file called <strong>src/example.cpp</strong> and paste the following code in it: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-25"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-30"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-31"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-32"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-33"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-34"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-35"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-36"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-37"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-38"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-39"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-40"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-41"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-42"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-43"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-44"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-45"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-46"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-47"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-48"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-49"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-50"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-51"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-52"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-53"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-54"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-55"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-56"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-57"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-58"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-59"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-60"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-61"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-62"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-5"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-6"></span><span class="Preprc">#</span><span class="Preprc">include &lt;ros</span><span class="Preprc">/</span><span class="Preprc">ros.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-3"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;sensor_msgs</span><span class="Preprc">/</span><span class="Preprc">PointCloud2.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-3"></span><span class="Preprc"></span><span class="Preprc">// PCL specific includes</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-1"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">ros</span><span class="Preprc">/</span><span class="Preprc">conversions.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5-1"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">point_cloud.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-6-1"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">point_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-7-1"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-8-1"></span><span class="ID">ros</span>::<span class="ID">Publisher</span> <span class="ID">pub</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-9-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-10-1"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-11-1"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">input</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-12-1"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-13-1"></span>  <span class="Comment">// ... do data processing</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-14-1"></span><span class="Comment"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-15-1"></span>  <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span> <span class="ID">output</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-16-1"></span>  <span class="Comment">// Publish the data</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-17-1"></span><span class="Comment"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">output</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-18-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_19">  19</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-19-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_20">  20</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-20-1"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_21">  21</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-21-1"></span><span class="ID">main</span> (<span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span>** <span class="ID">argv</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_22">  22</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-22-1"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_23">  23</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-23-1"></span>  <span class="Comment">// Initialize ROS</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_24">  24</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-24-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">init</span> (<span class="ID">argc</span>, <span class="ID">argv</span>, <span class="String">"</span><span class="String">my_pcl_tutorial</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_25">  25</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-25-1"></span>  <span class="ID">ros</span>::<span class="ID">NodeHandle</span> <span class="ID">nh</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_26">  26</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-26-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_27">  27</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-27-1"></span>  <span class="Comment">// Create a ROS subscriber for the input point cloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_28">  28</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-28-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">Subscriber</span> <span class="ID">sub</span> = <span class="ID">nh</span>.<span class="ID">subscribe</span> (<span class="String">"</span><span class="String">input</span><span class="String">"</span>, <span class="Number">1</span>, <span class="ID">cloud_cb</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_29">  29</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-29-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_30">  30</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_30"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-30-1"></span>  <span class="Comment">// Create a ROS publisher for the output point cloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_31">  31</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_31"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-31-1"></span><span class="Comment"></span>  <span class="ID">pub</span> = <span class="ID">nh</span>.<span class="ID">advertise</span>&lt;<span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span>&gt; (<span class="String">"</span><span class="String">output</span><span class="String">"</span>, <span class="Number">1</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_32">  32</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_32"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-32-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_33">  33</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_33"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-33-1"></span>  <span class="Comment">// Spin</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_34">  34</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_34"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-34-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">spin</span> ();</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_35">  35</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-db105cd6316ad875d5739a558e5e9881f161ed11_35"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-35-1"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-63"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-64"></span><p class="line862">The code above does nothing but initialize ROS, create a subscriber and a publisher for PointCloud2 data.  <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-65"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-66"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-groovy.Add_the_source_file_to_CMakeLists.txt">Add the source file to CMakeLists.txt</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-67"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-68"></span><p class="line874">Edit the CMakeLists.txt file in your newly created package and add: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-69"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-70"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-71"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-72"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-73"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-7"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-4"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-8"></span>rosbuild_add_executable (example src/example.cpp)</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-74"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-75"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-76"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-77"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-78"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-79"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-80"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-9"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-2"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-10"></span>add_executable(example src/example.cpp)
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-6"></span>target_link_libraries(example ${catkin_LIBRARIES})</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-81"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-82"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-groovy.Download_the_source_code_from_the_PCL_tutorial">Download the source code from the PCL tutorial</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-83"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-84"></span><p class="line874">All PCL versions prior to 2.0, have two different ways of representing point cloud data: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-85"></span><ul><li><p class="line862">through a <strong>sensor_msgs/PointCloud2</strong> ROS message <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-86"></span></li><li><p class="line862">through a <strong>pcl/PointCloud&lt;T&gt;</strong> data structure <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-87"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-88"></span></li></ul><p class="line874">The following two code examples will discuss both formats.  <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-89"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-90"></span><p class="line867">
<h3 id="pcl.2BAC8-Tutorials.2BAC8-groovy.sensor_msgs.2BAC8-PointCloud2">sensor_msgs/PointCloud2</h3>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-91"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-92"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-93"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-94"></span><div class="red solid"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-11"></span><p class="line862">If you'd like to save yourself some copying and pasting, you can download the source file for this example <a class="attachment" href="/pcl/Tutorials/groovy?action=AttachFile&amp;do=view&amp;target=example_voxelgrid.cpp" title="here">here</a>. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-95"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-96"></span><p class="line862">The <strong>sensor_msgs/PointCloud2</strong> format was designed as a ROS message, and is the preferred choice for ROS applications. In the following example, we downsample a PointCloud2 structure using a 3D grid, thus reducing the number of points in the input dataset considerably. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-97"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-98"></span><p class="line874">To add this capability to the code skeleton above, perform the following steps: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-99"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-100"></span><ul><li><p class="line862">visit <a class="http" href="http://www.pointclouds.org/documentation/">http://www.pointclouds.org/documentation/</a>, click on Tutorials, then navigate to the <strong>Downsampling a PointCloud using a VoxelGrid filter</strong> tutorial (<a class="http" href="http://www.pointclouds.org/documentation/tutorials/voxel_grid.php">http://www.pointclouds.org/documentation/tutorials/voxel_grid.php</a>) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-101"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-102"></span></li><li class="gap">read the code and the explanations provided there. You will notice that the code breaks down essentially in 3 parts: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-103"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-104"></span><ul><li>load the cloud (lines 9-19) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-105"></span></li><li>process the cloud (lines 20-24) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-106"></span></li><li>save the output (lines 25-32) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-107"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-108"></span></li></ul></li><li class="gap">since we use ROS subscribers and publishers in our code snippet above, we can ignore the loading and saving of point cloud data using the PCD format. Thus, the only relevant part in the tutorial remains lines 20-24 that create the PCL object, pass the input data, and perform the actual computation: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-109"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-110"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-111"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-112"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-113"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-114"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-115"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-12"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-13"></span>  <span class="Comment">// Create the filtering object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-7"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">VoxelGrid</span>&lt;<span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span>&gt; <span class="ID">sor</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-6"></span>  <span class="ID">sor</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-3"></span>  <span class="ID">sor</span>.<span class="ID">setLeafSize</span> (<span class="Number">0.01</span>, <span class="Number">0.01</span>, <span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-e12909c41791a598dcd31c17719ca047b9d1a585_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5-2"></span>  <span class="ID">sor</span>.<span class="ID">filter</span> (*<span class="ID">cloud_filtered</span>);</span>
</pre></div></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-116"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-117"></span><ul><li style="list-style-type:none"><p class="line862">In these lines, the input dataset is named <strong>cloud</strong>, and the output dataset is called <strong>cloud_filtered</strong>. Copy these lines, in the code snippet above, by modifying the callback function as follows: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-118"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-119"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-120"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-121"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-122"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-123"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-124"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-125"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-126"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-127"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-128"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-129"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-130"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-131"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-132"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-133"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-134"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-135"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-136"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-137"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-14"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-15"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">filters</span><span class="Preprc">/</span><span class="Preprc">voxel_grid.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-8"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-7"></span>...</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5-3"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-6-2"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">cloud</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-7-2"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-8-2"></span>  <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span> <span class="ID">cloud_filtered</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-9-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-10-2"></span>  <span class="Comment">// Perform the actual filtering</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-11-2"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">VoxelGrid</span>&lt;<span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span>&gt; <span class="ID">sor</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-12-2"></span>  <span class="ID">sor</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-13-2"></span>  <span class="ID">sor</span>.<span class="ID">setLeafSize</span> (<span class="Number">0.01</span>, <span class="Number">0.01</span>, <span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-14-2"></span>  <span class="ID">sor</span>.<span class="ID">filter</span> (<span class="ID">cloud_filtered</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-16-2"></span>  <span class="Comment">// Publish the data</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-17-2"></span><span class="Comment"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">cloud_filtered</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-b4ef7381f5493b552d0bc90d74147c2d0e558338_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-18-2"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-138"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-139"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-140"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-141"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-142"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-143"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-144"></span><div class="caution"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-16"></span><p class="line867"><strong>Note</strong> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-8"></span><p class="line862">Since different tutorials will often use different variable names for their inputs and outputs, remember that you may need to modify the code slightly when integrating the tutorial code into your own ROS node.  In this case, notice that we had to change the variable name <strong>input</strong> to <strong>cloud</strong>, and <strong>output</strong> to <strong>cloud_filtered</strong> in order to match up with the code from the tutorial we copied.   </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-145"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-146"></span><p class="line874">Save the output file then build: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-147"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-148"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-149"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-150"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-151"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-152"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-17"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-9"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-18"></span>$ rosmake my_pcl_tutorial</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-153"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-154"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-155"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-156"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-157"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-158"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-159"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-19"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-5"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-20"></span>$ cd %TOP_DIR_YOUR_CATKIN_HOME%
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-12"></span>$ catkin_make</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-160"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-161"></span><p class="line874">Then run: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-162"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-163"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-164"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-21"></span>$ rosrun my_pcl_tutorial example input:=/narrow_stereo_textured/points2</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-165"></span><p class="line874">or, if you're running an OpenNI-compatible depth sensor, try: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-166"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-167"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-168"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-22"></span>$ rosrun my_pcl_tutorial example input:=/camera/depth/points</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-169"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-170"></span><p class="line867">
<h3 id="pcl.2BAC8-Tutorials.2BAC8-groovy.pcl.2BAC8-PointCloud.3CT.3E">pcl/PointCloud&lt;T&gt;</h3>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-171"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-172"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-173"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-174"></span><div class="red solid"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-23"></span><p class="line862">As with the previous example, if you want to skip a few steps, you can download the source file for this example <a class="attachment" href="/pcl/Tutorials/groovy?action=AttachFile&amp;do=view&amp;target=example_planarsegmentation.cpp" title="here">here</a>. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-175"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-176"></span><p class="line862">The <strong>pcl/PointCloud&lt;T&gt;</strong> format represents the internal PCL point cloud format. For modularity and efficiency reasons, the format is templated on the point type, and PCL provides a list of templated common types which are SSE aligned. In the following example, we estimate the planar coefficients of the largest plane found in a scene. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-177"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-178"></span><p class="line874">To add this capability to the code skeleton above, perform the following steps: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-179"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-180"></span><ul><li><p class="line862">visit <a class="http" href="http://www.pointclouds.org/documentation/">http://www.pointclouds.org/documentation/</a>, click on Tutorials, then navigate to the <strong>Planar model segmentation</strong> tutorial (<a class="http" href="http://www.pointclouds.org/documentation/tutorials/planar_segmentation.php">http://www.pointclouds.org/documentation/tutorials/planar_segmentation.php</a>) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-181"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-182"></span></li><li class="gap">read the code and the explanations provided there. You will notice that the code breaks down essentially in 3 parts: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-183"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-184"></span><ul><li>create a cloud and populate it with values (lines 12-30) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-185"></span></li><li>process the cloud (38-56) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-186"></span></li><li>write the coefficients (58-68) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-187"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-188"></span></li></ul></li><li class="gap">since we use ROS subscribers in our code snippet above, we can ignore the first step, and just process the cloud received on the callback directly. Thus, the only relevant part in the tutorial remains lines 38-56 that create the PCL object, pass the input data, and perform the actual computation: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-189"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-190"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-191"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-192"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-193"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-194"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-195"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-196"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-197"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-198"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-199"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-200"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-201"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-202"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-203"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-24"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-25"></span>  <span class="ID">pcl</span>::<span class="ID">ModelCoefficients</span> <span class="ID">coefficients</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-13"></span>  <span class="ID">pcl</span>::<span class="ID">PointIndices</span> <span class="ID">inliers</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-11"></span>  <span class="Comment">// Create the segmentation object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-6"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">SACSegmentation</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">seg</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5-4"></span>  <span class="Comment">// Optional</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-6-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setOptimizeCoefficients</span> (<span class="ConsWord">true</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-7-3"></span>  <span class="Comment">// Mandatory</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-8-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setModelType</span> (<span class="ID">pcl</span>::<span class="ID">SACMODEL_PLANE</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-9-3"></span>  <span class="ID">seg</span>.<span class="ID">setMethodType</span> (<span class="ID">pcl</span>::<span class="ID">SAC_RANSAC</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-10-3"></span>  <span class="ID">seg</span>.<span class="ID">setDistanceThreshold</span> (<span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-11-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-12-3"></span>  <span class="ID">seg</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>.<span class="ID">makeShared</span> ());</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-4ea45924d78165aae036167ee27993a29f19a8b4_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-13-3"></span>  <span class="ID">seg</span>.<span class="ID">segment</span> (<span class="ID">inliers</span>, <span class="ID">coefficients</span>);</span>
</pre></div></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-204"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-205"></span><ul><li style="list-style-type:none"><p class="line862">In these lines, the input dataset is named <strong>cloud</strong> and is of type <strong>pcl::<a class="nonexistent" href="/PointCloud">PointCloud</a>&lt;pcl::PointXYZ&gt;</strong>, and the output is represented by a set of point indices that contain the plane together with the plane coefficients. <strong>cloud.makeShared()</strong> creates a <a class="http" href="http://www.boost.org/doc/libs/1_46_1/libs/smart_ptr/shared_ptr.htm">boost shared_ptr</a> object for the object <strong>cloud</strong> (see <a class="http" href="http://docs.pointclouds.org/1.5.1/classpcl_1_1_point_cloud.html#a33ec29ee932707f593af9839eb37ea17">the pcl::PointCloud API</a> documentation).  <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-206"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-207"></span></li></ul><p class="line874">Copy these lines, in the code snippet above, by modifying the callback function as follows: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-208"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-209"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-210"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-211"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-212"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-213"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-214"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-215"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-216"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-217"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-218"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-219"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-220"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-221"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-222"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-223"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-224"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-225"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-226"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-227"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-228"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-229"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-230"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-231"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-232"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-233"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-234"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-235"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-236"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-237"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-238"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-239"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-26"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-27"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">sample_consensus</span><span class="Preprc">/</span><span class="Preprc">model_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-14"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">sample_consensus</span><span class="Preprc">/</span><span class="Preprc">method_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-3-12"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">segmentation</span><span class="Preprc">/</span><span class="Preprc">sac_segmentation.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-4-7"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-5-5"></span>...</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-6-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-7-4"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-8-4"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">input</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-9-4"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-10-4"></span>  <span class="Comment">// Convert the sensor_msgs/PointCloud2 data to pcl/PointCloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-11-4"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">PointCloud</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">cloud</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-12-4"></span>  <span class="ID">pcl</span>::<span class="ID">fromROSMsg</span> (*<span class="ID">input</span>, <span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-13-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-14-3"></span>  <span class="ID">pcl</span>::<span class="ID">ModelCoefficients</span> <span class="ID">coefficients</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-15-3"></span>  <span class="ID">pcl</span>::<span class="ID">PointIndices</span> <span class="ID">inliers</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-16-3"></span>  <span class="Comment">// Create the segmentation object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-17-3"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">SACSegmentation</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">seg</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-18-3"></span>  <span class="Comment">// Optional</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_19">  19</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-19-2"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setOptimizeCoefficients</span> (<span class="ConsWord">true</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_20">  20</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-20-2"></span>  <span class="Comment">// Mandatory</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_21">  21</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-21-2"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setModelType</span> (<span class="ID">pcl</span>::<span class="ID">SACMODEL_PLANE</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_22">  22</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-22-2"></span>  <span class="ID">seg</span>.<span class="ID">setMethodType</span> (<span class="ID">pcl</span>::<span class="ID">SAC_RANSAC</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_23">  23</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-23-2"></span>  <span class="ID">seg</span>.<span class="ID">setDistanceThreshold</span> (<span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_24">  24</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-24-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_25">  25</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-25-2"></span>  <span class="ID">seg</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>.<span class="ID">makeShared</span> ());</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_26">  26</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-26-2"></span>  <span class="ID">seg</span>.<span class="ID">segment</span> (<span class="ID">inliers</span>, <span class="ID">coefficients</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_27">  27</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-27-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_28">  28</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-28-2"></span>  <span class="Comment">// Publish the model coefficients</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_29">  29</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-29-2"></span><span class="Comment"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">coefficients</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_30">  30</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.CA-a6a1464cd3af5b3e9d7221d7bb894c97fcd8638e_30"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-30-2"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-240"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-241"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-242"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-243"></span><div class="caution"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-28"></span><ul><li style="list-style-type:none"><p class="line862">Notice that we added a conversion step from <strong>sensor_msgs/PointCloud2</strong> to <strong>pcl/PointCloud&lt;T&gt;</strong> on the first two lines, and we also changed the variable that we publish from <strong>output</strong> to <strong>coefficients</strong>. </li></ul></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-244"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-245"></span><p class="line874">In addition, since we're now publishing the planar model coefficients found rather than point cloud data, we have to change our publisher type from: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-246"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-247"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-248"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-249"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-250"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-29"></span>  // Create a ROS publisher for the output point cloud
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-15"></span>  pub = nh.advertise&lt;sensor_msgs::PointCloud2&gt; ("output", 1);</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-251"></span><p class="line874">to: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-252"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-253"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-254"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-255"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-30"></span>  // Create a ROS publisher for the output model coefficients
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-2-16"></span>  pub = nh.advertise&lt;pcl::ModelCoefficients&gt; ("output", 1);</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-256"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-257"></span><p class="line874">Save the output file, then compile and run the code above: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-258"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-259"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-260"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-31"></span>$ rosrun my_pcl_tutorial example input:=/narrow_stereo_textured/points2</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-261"></span><p class="line874">or, if you're running an OpenNI-compatible depth sensor, try: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-262"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-263"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-264"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-1-32"></span>$ rosrun my_pcl_tutorial example input:=/camera/depth/points</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.line-265"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-groovy.bottom"></span></div> </div><span class="anchor" id="line-24"></span><p class="line867"><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><div class="version hydro_and_newer"><span class="anchor" id="line-1-3"></span><p class="line867"><div dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.content" lang="en"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.top"></span>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1"></span><p class="line867">
<h1 id="pcl.2BAC8-Tutorials.2BAC8-hydro.How_to_use_a_PCL_tutorial_in_ROS">How to use a PCL tutorial in ROS</h1>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.How_to_use_a_PCL_tutorial_in_ROS">How to use a PCL tutorial in ROS</a><ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.Create_a_ROS_package">Create a ROS package</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.Create_the_code_skeleton">Create the code skeleton</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.Add_the_source_file_to_CMakeLists.txt">Add the source file to CMakeLists.txt</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.Download_the_source_code_from_the_PCL_tutorial">Download the source code from the PCL tutorial</a><ol><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.sensor_msgs.2BAC8-PointCloud2">sensor_msgs/PointCloud2</a></li><li>
<a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.pcl.2BAC8-PointCloud.3CT.3E">pcl/PointCloud&lt;T&gt;</a></li></ol></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-hydro.Create_a_ROS_package">Create a ROS package</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-7"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-11"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-1"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-1"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-2"></span>$ roscreate-pkg my_pcl_tutorial pcl_conversions pcl_ros roscpp sensor_msgs</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-12"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-16"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-3"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-2"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-4"></span>$ catkin_create_pkg my_pcl_tutorial pcl_conversions pcl_ros roscpp sensor_msgs </pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-18"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-24"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-5"></span><p class="line874">Then, modify the package.xml to add <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-1"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-6"></span>  &lt;build_depend&gt;libpcl-all-dev&lt;/build_depend&gt;
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-4"></span>  &lt;run_depend&gt;libpcl-all&lt;/run_depend&gt;</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-26"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-hydro.Create_the_code_skeleton">Create the code skeleton</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-28"></span><p class="line862">Create an empty file called <strong>src/example.cpp</strong> and paste the following code in it: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-30"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-31"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-32"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-33"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-34"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-35"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-36"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-37"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-38"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-39"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-40"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-41"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-42"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-43"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-44"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-45"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-46"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-47"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-48"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-49"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-50"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-51"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-52"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-53"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-54"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-55"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-56"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-57"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-58"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-59"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-60"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-61"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-62"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-63"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-64"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-65"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-66"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-67"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-68"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-69"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-7"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-8"></span><span class="Preprc">#</span><span class="Preprc">include &lt;ros</span><span class="Preprc">/</span><span class="Preprc">ros.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-5"></span><span class="Preprc"></span><span class="Preprc">// PCL specific includes</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-4"></span><span class="Preprc">#</span><span class="Preprc">include &lt;sensor_msgs</span><span class="Preprc">/</span><span class="Preprc">PointCloud2.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-2"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl_conversions</span><span class="Preprc">/</span><span class="Preprc">pcl_conversions.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-2"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">point_cloud.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-6-1"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">point_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-7-1"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-8-1"></span><span class="ID">ros</span>::<span class="ID">Publisher</span> <span class="ID">pub</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-9-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-10-1"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-11-1"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">input</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-12-1"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-13-1"></span>  <span class="Comment">// Create a container for the data.</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-14-1"></span><span class="Comment"></span>  <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span> <span class="ID">output</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-15-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-16-1"></span>  <span class="Comment">// Do data processing here...</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-17-1"></span><span class="Comment"></span>  <span class="ID">output</span> = *<span class="ID">input</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-18-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_19">  19</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-19-1"></span>  <span class="Comment">// Publish the data.</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_20">  20</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-20-1"></span><span class="Comment"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">output</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_21">  21</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-21-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_22">  22</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-22-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_23">  23</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-23-1"></span><span class="ResWord">int</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_24">  24</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-24-1"></span><span class="ID">main</span> (<span class="ResWord">int</span> <span class="ID">argc</span>, <span class="ResWord">char</span>** <span class="ID">argv</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_25">  25</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-25-1"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_26">  26</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-26-1"></span>  <span class="Comment">// Initialize ROS</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_27">  27</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-27-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">init</span> (<span class="ID">argc</span>, <span class="ID">argv</span>, <span class="String">"</span><span class="String">my_pcl_tutorial</span><span class="String">"</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_28">  28</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-28-1"></span>  <span class="ID">ros</span>::<span class="ID">NodeHandle</span> <span class="ID">nh</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_29">  29</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-29-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_30">  30</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_30"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-30-1"></span>  <span class="Comment">// Create a ROS subscriber for the input point cloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_31">  31</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_31"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-31-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">Subscriber</span> <span class="ID">sub</span> = <span class="ID">nh</span>.<span class="ID">subscribe</span> (<span class="String">"</span><span class="String">input</span><span class="String">"</span>, <span class="Number">1</span>, <span class="ID">cloud_cb</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_32">  32</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_32"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-32-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_33">  33</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_33"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-33-1"></span>  <span class="Comment">// Create a ROS publisher for the output point cloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_34">  34</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_34"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-34-1"></span><span class="Comment"></span>  <span class="ID">pub</span> = <span class="ID">nh</span>.<span class="ID">advertise</span>&lt;<span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span>&gt; (<span class="String">"</span><span class="String">output</span><span class="String">"</span>, <span class="Number">1</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_35">  35</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_35"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-35-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_36">  36</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_36"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-36-1"></span>  <span class="Comment">// Spin</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_37">  37</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_37"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-37-1"></span><span class="Comment"></span>  <span class="ID">ros</span>::<span class="ID">spin</span> ();</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_38">  38</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-3571590cfeccbc210e304977f9d1f64a4f348d6e_38"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-38-1"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-70"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-71"></span><p class="line862">The code above does nothing but initialize ROS, create a subscriber and a publisher for PointCloud2 data.  <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-72"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-73"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-hydro.Add_the_source_file_to_CMakeLists.txt">Add the source file to CMakeLists.txt</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-74"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-75"></span><p class="line874">Edit the CMakeLists.txt file in your newly created package and add: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-76"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-77"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-78"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-79"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-80"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-9"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-5"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-10"></span>rosbuild_add_executable (example src/example.cpp)</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-81"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-82"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-83"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-84"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-85"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-86"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-11"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-3"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-12"></span>add_executable(example src/example.cpp)
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-8"></span>target_link_libraries(example ${catkin_LIBRARIES})</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-87"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-88"></span><p class="line867">
<h2 id="pcl.2BAC8-Tutorials.2BAC8-hydro.Download_the_source_code_from_the_PCL_tutorial">Download the source code from the PCL tutorial</h2>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-89"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-90"></span><p class="line862">PCL has about <em>four</em> different ways of representing point cloud data, so it can get a bit confusing, but we'll try to keep it simple for you. The types are: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-91"></span><ul><li><p class="line891"><strong>sensor_msgs::<a class="nonexistent" href="/PointCloud">PointCloud</a></strong>  ROS message (deprecated) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-92"></span></li><li><p class="line891"><strong>sensor_msgs::<a class="nonexistent" href="/PointCloud2">PointCloud2</a></strong>  ROS message <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-93"></span></li><li><p class="line891"><strong>pcl::PCLPointCloud2</strong>  PCL data structure mostly for compatibility with ROS (I think) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-94"></span></li><li><p class="line891"><strong>pcl::<a class="nonexistent" href="/PointCloud">PointCloud</a>&lt;T&gt;</strong>  standard PCL data structure <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-95"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-96"></span></li></ul><p class="line862">In the following code examples we will focus on the ROS message (<tt class="backtick">sensor_msgs::PointCloud2</tt>) and the standard PCL data structure (<tt class="backtick">pcl::PointCloud&lt;T&gt;</tt>). However, you should also note that <tt class="backtick">pcl::PCLPointCloud2</tt> is an important and useful type as well: you can directly subscribe to nodes using that type and it will be automatically serialized to/from the <tt class="backtick">sensor_msgs</tt> type. See <a class="attachment" href="/pcl/Tutorials/hydro?action=AttachFile&amp;do=view&amp;target=example_voxelgrid_pcl_types.cpp" title="this example">this example</a> to try <tt class="backtick">PCLPointCloud2</tt> yourself. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-97"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-98"></span><p class="line867">
<h3 id="pcl.2BAC8-Tutorials.2BAC8-hydro.sensor_msgs.2BAC8-PointCloud2">sensor_msgs/PointCloud2</h3>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-99"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-100"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-101"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-102"></span><div class="red solid"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-13"></span><p class="line862">If you'd like to save yourself some copying and pasting, you can download the source file for this example <a class="attachment" href="/pcl/Tutorials/hydro?action=AttachFile&amp;do=view&amp;target=example_voxelgrid.cpp" title="here">here</a>. Just remember to rename the file to example.cpp or edit your CMakeLists.txt to match. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-103"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-104"></span><p class="line862">The <strong>sensor_msgs/PointCloud2</strong> format was designed as a ROS message, and is the preferred choice for ROS applications. In the following example, we downsample a PointCloud2 structure using a 3D grid, thus reducing the number of points in the input dataset considerably. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-105"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-106"></span><p class="line874">To add this capability to the code skeleton above, perform the following steps: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-107"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-108"></span><ul><li><p class="line862">visit <a class="http" href="http://www.pointclouds.org/documentation/">http://www.pointclouds.org/documentation/</a>, click on Tutorials, then navigate to the <strong>Downsampling a PointCloud using a VoxelGrid filter</strong> tutorial (<a class="http" href="http://www.pointclouds.org/documentation/tutorials/voxel_grid.php">http://www.pointclouds.org/documentation/tutorials/voxel_grid.php</a>) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-109"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-110"></span></li><li class="gap">read the code and the explanations provided there. You will notice that the code breaks down essentially in 3 parts: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-111"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-112"></span><ul><li>load the cloud (lines 9-19) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-113"></span></li><li>process the cloud (lines 20-24) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-114"></span></li><li>save the output (lines 25-32) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-115"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-116"></span></li></ul></li><li class="gap">since we use ROS subscribers and publishers in our code snippet above, we can ignore the loading and saving of point cloud data using the PCD format. Thus, the only relevant part in the tutorial remains lines 20-24 that create the PCL object, pass the input data, and perform the actual computation: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-117"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-118"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-119"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-120"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-121"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-122"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-123"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-14"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-15"></span>  <span class="Comment">// Create the filtering object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-9"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">VoxelGrid</span>&lt;<span class="ID">pcl</span>::<span class="ID">PCLPointCloud2</span>&gt; <span class="ID">sor</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-7"></span>  <span class="ID">sor</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-4"></span>  <span class="ID">sor</span>.<span class="ID">setLeafSize</span> (<span class="Number">0.01</span>, <span class="Number">0.01</span>, <span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-fd58b424fe3346661f3310747bf6b8e64049beb2_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-3"></span>  <span class="ID">sor</span>.<span class="ID">filter</span> (*<span class="ID">cloud_filtered</span>);</span>
</pre></div></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-124"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-125"></span><ul><li style="list-style-type:none"><p class="line862">In these lines, the input dataset is named <em>cloud</em>, and the output dataset is called <em>cloud_filtered</em>. We can copy this work, but <strong>remember from earlier that we said we wanted to work with the sensor_msgs class, not the pcl class.</strong> In order to do this, we're going to have to do a little bit of extra work to <em>convert</em> the ROS message to the PCL type. Modify the callback function as follows: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-126"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-127"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-128"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-129"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-130"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-131"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-132"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-133"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-134"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-135"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-136"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-137"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-138"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-139"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-140"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-141"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-142"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-143"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-144"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-145"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-146"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-147"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-148"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-149"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-150"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-151"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-152"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-153"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-154"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-155"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-16"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-17"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">filters</span><span class="Preprc">/</span><span class="Preprc">voxel_grid.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-10"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-8"></span>...</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-4"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-6-2"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">cloud_msg</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-7-2"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-8-2"></span>  <span class="Comment">// Container for original &amp; filtered data</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-9-2"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">PCLPointCloud2</span>* <span class="ID">cloud</span> = <span class="ResWord">new</span> <span class="ID">pcl</span>::<span class="ID">PCLPointCloud2</span>; </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-10-2"></span>  <span class="ID">pcl</span>::<span class="ID">PCLPointCloud2ConstPtr</span> <span class="ID">cloudPtr</span>(<span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-11-2"></span>  <span class="ID">pcl</span>::<span class="ID">PCLPointCloud2</span> <span class="ID">cloud_filtered</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-12-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-13-2"></span>  <span class="Comment">// Convert to PCL data type</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-14-2"></span><span class="Comment"></span>  <span class="ID">pcl_conversions</span>::<span class="ID">toPCL</span>(*<span class="ID">cloud_msg</span>, *<span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-16-2"></span>  <span class="Comment">// Perform the actual filtering</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-17-2"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">VoxelGrid</span>&lt;<span class="ID">pcl</span>::<span class="ID">PCLPointCloud2</span>&gt; <span class="ID">sor</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-18-2"></span>  <span class="ID">sor</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloudPtr</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_19">  19</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-19-2"></span>  <span class="ID">sor</span>.<span class="ID">setLeafSize</span> (<span class="Number">0.1</span>, <span class="Number">0.1</span>, <span class="Number">0.1</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_20">  20</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-20-2"></span>  <span class="ID">sor</span>.<span class="ID">filter</span> (<span class="ID">cloud_filtered</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_21">  21</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-21-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_22">  22</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-22-2"></span>  <span class="Comment">// Convert to ROS data type</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_23">  23</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-23-2"></span><span class="Comment"></span>  <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2</span> <span class="ID">output</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_24">  24</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-24-2"></span>  <span class="ID">pcl_conversions</span>::<span class="ID">fromPCL</span>(<span class="ID">cloud_filtered</span>, <span class="ID">output</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_25">  25</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-25-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_26">  26</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-26-2"></span>  <span class="Comment">// Publish the data</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_27">  27</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-27-2"></span><span class="Comment"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">output</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_28">  28</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-e354a606bbbe4e8bf1d904b7f7ce8dbb7af53fcb_28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-28-2"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-156"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-157"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-158"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-159"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-160"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-161"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-162"></span><div class="caution"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-18"></span><p class="line867"><strong>Note</strong> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-9"></span><p class="line862">Since different tutorials will often use different variable names for their inputs and outputs, remember that you may need to modify the code slightly when integrating the tutorial code into your own ROS node.  In this case, notice that we had to change the variable name <em>input</em> to <em>cloud</em>, and <em>output</em> to <em>cloud_filtered</em> in order to match up with the code from the tutorial we copied.   </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-163"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-164"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-165"></span><div class="caution"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-19"></span><p class="line862">Note that there is a slight inefficiency here. The <tt class="backtick">fromPCL</tt> can be replaced with <tt class="backtick">moveFromPCL</tt> to prevent copying the entire (filtered) point cloud. However, the <tt class="backtick">toPCL</tt> call cannot be optimized in this way since the original input is <tt class="backtick">const</tt>. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-166"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-167"></span><p class="line874">Save the output file then build: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-168"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-169"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-170"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-171"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-172"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-173"></span><div class="buildsystem rosbuild"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-20"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-10"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-21"></span>$ rosmake my_pcl_tutorial</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-174"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-175"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-176"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-177"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-178"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-179"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-180"></span><div class="buildsystem catkin"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-22"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-6"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-23"></span>$ cd %TOP_DIR_YOUR_CATKIN_HOME%
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-14"></span>$ catkin_make</pre></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-181"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-182"></span><p class="line874">Then run: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-183"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-184"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-185"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-24"></span>$ rosrun my_pcl_tutorial example input:=/narrow_stereo_textured/points2</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-186"></span><p class="line874">or, if you're running an OpenNI-compatible depth sensor, try: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-187"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-188"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-189"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-190"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-25"></span>$ roslaunch openni_launch openni.launch
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-15"></span>$ rosrun my_pcl_tutorial example input:=/camera/depth/points</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-191"></span><p class="line874">You can visualize the result by running RViz: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-192"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-193"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-194"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-26"></span>$ rosrun rviz rviz</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-195"></span><p class="line862">and adding a "<a class="nonexistent" href="/PointCloud2">PointCloud2</a>" display. Select <strong>camera_depth_frame</strong> for the Fixed Frame (or whatever frame is appropriate for your sensor) and select <strong>output</strong> for the <a class="nonexistent" href="/PointCloud2">PointCloud2</a> topic. You should see a highly downsampled point cloud. For comparison, you can view the <strong>/camera/depth/points</strong> topic and see how much it has been downsampled. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-196"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-197"></span><p class="line867">
<h3 id="pcl.2BAC8-Tutorials.2BAC8-hydro.pcl.2BAC8-PointCloud.3CT.3E">pcl/PointCloud&lt;T&gt;</h3>
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-198"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-199"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-200"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-201"></span><div class="red solid"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-27"></span><p class="line862">As with the previous example, if you want to skip a few steps, you can download the source file for this example <a class="attachment" href="/pcl/Tutorials/hydro?action=AttachFile&amp;do=view&amp;target=example_planarsegmentation.cpp" title="here">here</a>. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-202"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-203"></span><p class="line862">The <strong>pcl/PointCloud&lt;T&gt;</strong> format represents the internal PCL point cloud format. For modularity and efficiency reasons, the format is templated on the point type, and PCL provides a list of templated common types which are SSE aligned. In the following example, we estimate the planar coefficients of the largest plane found in a scene. <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-204"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-205"></span><p class="line874">To add this capability to the code skeleton above, perform the following steps: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-206"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-207"></span><ul><li><p class="line862">visit <a class="http" href="http://www.pointclouds.org/documentation/">http://www.pointclouds.org/documentation/</a>, click on Tutorials, then navigate to the <strong>Planar model segmentation</strong> tutorial (<a class="http" href="http://www.pointclouds.org/documentation/tutorials/planar_segmentation.php">http://www.pointclouds.org/documentation/tutorials/planar_segmentation.php</a>) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-208"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-209"></span></li><li class="gap">read the code and the explanations provided there. You will notice that the code breaks down essentially in 3 parts: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-210"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-211"></span><ul><li>create a cloud and populate it with values (lines 12-30) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-212"></span></li><li>process the cloud (38-56) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-213"></span></li><li>write the coefficients (58-68) <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-214"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-215"></span></li></ul></li><li class="gap">since we use ROS subscribers in our code snippet above, we can ignore the first step, and just process the cloud received on the callback directly. Thus, the only relevant part in the tutorial remains lines 38-56 that create the PCL object, pass the input data, and perform the actual computation: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-216"></span></li></ul><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-217"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-218"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-219"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-220"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-221"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-222"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-223"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-224"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-225"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-226"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-227"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-228"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-229"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-230"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-28"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-29"></span>  <span class="ID">pcl</span>::<span class="ID">ModelCoefficients</span> <span class="ID">coefficients</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-16"></span>  <span class="ID">pcl</span>::<span class="ID">PointIndices</span> <span class="ID">inliers</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-12"></span>  <span class="Comment">// Create the segmentation object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-7"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">SACSegmentation</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">seg</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-5"></span>  <span class="Comment">// Optional</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-6-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setOptimizeCoefficients</span> (<span class="ConsWord">true</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-7-3"></span>  <span class="Comment">// Mandatory</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-8-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setModelType</span> (<span class="ID">pcl</span>::<span class="ID">SACMODEL_PLANE</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-9-3"></span>  <span class="ID">seg</span>.<span class="ID">setMethodType</span> (<span class="ID">pcl</span>::<span class="ID">SAC_RANSAC</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-10-3"></span>  <span class="ID">seg</span>.<span class="ID">setDistanceThreshold</span> (<span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-11-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-12-3"></span>  <span class="ID">seg</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>.<span class="ID">makeShared</span> ());</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-4ea45924d78165aae036167ee27993a29f19a8b4_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-13-3"></span>  <span class="ID">seg</span>.<span class="ID">segment</span> (<span class="ID">inliers</span>, <span class="ID">coefficients</span>);</span>
</pre></div></div><p class="line874"> <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-231"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-232"></span><ul><li style="list-style-type:none"><p class="line862">In these lines, the input dataset is named <strong>cloud</strong> and is of type <strong>pcl::<a class="nonexistent" href="/PointCloud">PointCloud</a>&lt;pcl::PointXYZ&gt;</strong>, and the output is represented by a set of point indices that contain the plane together with the plane coefficients. <strong>cloud.makeShared()</strong> creates a <a class="http" href="http://www.boost.org/doc/libs/1_46_1/libs/smart_ptr/shared_ptr.htm">boost shared_ptr</a> object for the object <strong>cloud</strong> (see <a class="http" href="http://docs.pointclouds.org/1.5.1/classpcl_1_1_point_cloud.html#a33ec29ee932707f593af9839eb37ea17">the pcl::PointCloud API</a> documentation).  <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-233"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-234"></span></li></ul><p class="line874">Copy these lines, in the code snippet above, by modifying the callback function as follows: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-235"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-236"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-237"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-238"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-239"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-240"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-241"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-242"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-243"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-244"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-245"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-246"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-247"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-248"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-249"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-250"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-251"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-252"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-253"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-254"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-255"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-256"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-257"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-258"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-259"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-260"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-261"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-262"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-263"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-264"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-265"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-266"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-267"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-268"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-30"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71" lang="en"><span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_1">   1</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_1"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-31"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">sample_consensus</span><span class="Preprc">/</span><span class="Preprc">model_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_2">   2</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_2"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-17"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">sample_consensus</span><span class="Preprc">/</span><span class="Preprc">method_types.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_3">   3</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_3"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-3-13"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;pcl</span><span class="Preprc">/</span><span class="Preprc">segmentation</span><span class="Preprc">/</span><span class="Preprc">sac_segmentation.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_4">   4</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_4"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-4-8"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_5">   5</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_5"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-5-6"></span>...</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_6">   6</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_6"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-6-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_7">   7</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_7"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-7-4"></span><span class="ResWord">void</span> </span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_8">   8</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_8"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-8-4"></span><span class="ID">cloud_cb</span> (<span class="ResWord">const</span> <span class="ID">sensor_msgs</span>::<span class="ID">PointCloud2ConstPtr</span>&amp; <span class="ID">input</span>)</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_9">   9</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_9"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-9-4"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_10">  10</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_10"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-10-4"></span>  <span class="Comment">// Convert the sensor_msgs/PointCloud2 data to pcl/PointCloud</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_11">  11</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_11"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-11-4"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">PointCloud</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">cloud</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_12">  12</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_12"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-12-4"></span>  <span class="ID">pcl</span>::<span class="ID">fromROSMsg</span> (*<span class="ID">input</span>, <span class="ID">cloud</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_13">  13</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_13"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-13-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_14">  14</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_14"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-14-3"></span>  <span class="ID">pcl</span>::<span class="ID">ModelCoefficients</span> <span class="ID">coefficients</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_15">  15</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_15"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-15-3"></span>  <span class="ID">pcl</span>::<span class="ID">PointIndices</span> <span class="ID">inliers</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_16">  16</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_16"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-16-3"></span>  <span class="Comment">// Create the segmentation object</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_17">  17</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_17"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-17-3"></span><span class="Comment"></span>  <span class="ID">pcl</span>::<span class="ID">SACSegmentation</span>&lt;<span class="ID">pcl</span>::<span class="ID">PointXYZ</span>&gt; <span class="ID">seg</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_18">  18</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_18"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-18-3"></span>  <span class="Comment">// Optional</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_19">  19</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_19"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-19-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setOptimizeCoefficients</span> (<span class="ConsWord">true</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_20">  20</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_20"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-20-3"></span>  <span class="Comment">// Mandatory</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_21">  21</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_21"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-21-3"></span><span class="Comment"></span>  <span class="ID">seg</span>.<span class="ID">setModelType</span> (<span class="ID">pcl</span>::<span class="ID">SACMODEL_PLANE</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_22">  22</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_22"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-22-3"></span>  <span class="ID">seg</span>.<span class="ID">setMethodType</span> (<span class="ID">pcl</span>::<span class="ID">SAC_RANSAC</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_23">  23</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_23"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-23-3"></span>  <span class="ID">seg</span>.<span class="ID">setDistanceThreshold</span> (<span class="Number">0.01</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_24">  24</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_24"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-24-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_25">  25</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_25"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-25-3"></span>  <span class="ID">seg</span>.<span class="ID">setInputCloud</span> (<span class="ID">cloud</span>.<span class="ID">makeShared</span> ());</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_26">  26</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_26"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-26-3"></span>  <span class="ID">seg</span>.<span class="ID">segment</span> (<span class="ID">inliers</span>, <span class="ID">coefficients</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_27">  27</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_27"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-27-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_28">  28</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_28"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-28-3"></span>  <span class="Comment">// Publish the model coefficients</span></span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_29">  29</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_29"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-29-2"></span><span class="Comment"></span>  <span class="ID">pcl_msgs</span>::<span class="ID">ModelCoefficients</span> <span class="ID">ros_coefficients</span>;</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_30">  30</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_30"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-30-2"></span>  <span class="ID">pcl_conversions</span>::<span class="ID">fromPCL</span>(<span class="ID">coefficients</span>, <span class="ID">ros_coefficients</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_31">  31</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_31"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-31-2"></span>  <span class="ID">pub</span>.<span class="ID">publish</span> (<span class="ID">ros_coefficients</span>);</span>
<span class="line"><span class="LineNumber"><a href="#pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_32">  32</a> </span><span class="LineAnchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.CA-df0b218d885eb3da3cb76014e518a18a312a9e71_32"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-32-2"></span>}</span>
</pre></div></div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-269"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-270"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-271"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-272"></span><div class="caution"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-32"></span><p class="line862">Notice that we added two conversion steps: from <tt class="backtick">sensor_msgs/PointCloud2</tt> to <tt class="backtick">pcl/PointCloud&lt;T&gt;</tt> and from <tt class="backtick">pcl::ModelCoefficients</tt> to <tt class="backtick">pcl_msgs::ModelCoefficients</tt>. We also changed the variable that we publish from <tt class="backtick">output</tt> to <tt class="backtick">coefficients</tt>. </div><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-273"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-274"></span><p class="line874">In addition, since we're now publishing the planar model coefficients found rather than point cloud data, we have to change our publisher type from: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-275"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-276"></span><p class="line867"><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-277"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-278"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-279"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-33"></span>  // Create a ROS publisher for the output point cloud
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-18"></span>  pub = nh.advertise&lt;sensor_msgs::PointCloud2&gt; ("output", 1);</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-280"></span><p class="line874">to: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-281"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-282"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-283"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-284"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-34"></span>  // Create a ROS publisher for the output model coefficients
<span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-2-19"></span>  pub = nh.advertise&lt;pcl_msgs::ModelCoefficients&gt; ("output", 1);</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-285"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-286"></span><p class="line874">Save the output file, then compile and run the code above: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-287"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-288"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-289"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-35"></span>$ rosrun my_pcl_tutorial example input:=/narrow_stereo_textured/points2</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-290"></span><p class="line874">or, if you're running an OpenNI-compatible depth sensor, try: <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-291"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-292"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-293"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-36"></span>$ rosrun my_pcl_tutorial example input:=/camera/depth/points</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-294"></span><p class="line874">See the output with <span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-295"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-296"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-297"></span><pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-1-37"></span>$ rostopic echo output</pre><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.line-298"></span><span class="anchor" id="pcl.2BAC8-Tutorials.2BAC8-hydro.bottom"></span></div> </div><span class="anchor" id="line-27"></span><span class="anchor" id="bottom"></span></div></div>
<div id="pagebottom"></div>
</div>

<p id="pageinfo" class="info" lang="en" dir="ltr">Wiki: pcl/Tutorials  (last edited 2015-05-07 00:04:56 by <span title="William J. Woodall @ 70-35-50-58.static.wiline.com[70.35.50.58]"><a href="/WilliamWoodall" title="William J. Woodall @ 70-35-50-58.static.wiline.com[70.35.50.58]">WilliamWoodall</a></span>)</p>




<div style="margin-top: 9px;" class="footer">
Except where otherwise noted, the ROS wiki is licensed under the <br /><a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a> | <a href="https://plus.google.com/113789706402978299308" rel="publisher">Find us on Google+</a>
<hr style="margin-top: 10px;">
<div class="row">
  <div class="col-md-4 col-md-offset-4">
<a href="http://www.osrfoundation.org"><img style="margin-top: -1px;" src="/custom/images/brought_by_horiz.png"></p></a>
  </div>
</div>
</div>

  </div></div> <!-- /#dpage-inner, /#dpage -->


</body>
</html>

 E<      X'X'=]       "    :http://wiki.ros.org/pcl/Tutorials necko:classified 1 strongly-framed 1 request-method GET request-Cookie 0wi5dAa3QWye0rtttXDPBWe4WBk= request-User-Agent Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:50.0) Gecko/20100101 Firefox/50.0 request-Accept-Language en-US,en;q=0.5 response-head HTTP/1.1 200 OK
Date: Wed, 25 Jan 2017 04:22:09 GMT
Server: Apache
Vary: Cookie,User-Agent,Accept-Language
Content-Type: text/html; charset=utf-8
 original-response-headers Date: Wed, 25 Jan 2017 04:22:09 GMT
Server: Apache
Vary: Cookie,User-Agent,Accept-Language
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8
 charset UTF-8 uncompressed-len 0 predictor::resource-count 15 predictor::http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css 1,1,1485318129,4096 predictor::http://code.jquery.com/jquery-1.11.0.min.js 1,1,1485318129,4096 predictor::http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/custom/js/sorttable.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/custom/libraries/jquery.min.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/custom/js/seesaw.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/custom/js/rosversion.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/common/js/common.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/rostheme/css/common.css 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/rostheme/css/screen.css 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/rostheme/css/print.css 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/rostheme/css/projection.css 1,1,1485318129,4096 predictor::http://www.google-analytics.com/ga.js 1,1,1485318129,4096 predictor::http://wiki.ros.org/moin_static197/rostheme/img/moin-attach.png 1,1,1485318129,4097 predictor::http://wiki.ros.org/moin_static197/rostheme/img/admon-caution.png 1,1,1485318129,4097  '